# 1. はじめに

はじめまして。このコース「Google Cloud の基礎図解と実践でインフラの基礎を固める」へようこそ。ご受講ありがとうございます。

## 自己紹介

- 講師：菊川正人
- 経歴：アプリケーション開発・システムエンジニア出身
- 現在：Google Cloud、Microsoft Azureの公式トレーナーとして活動
- 保有資格：Google Cloud / Microsoft関連の資格多数

## コース制作時期

- 2021年後半〜2022年にかけて制作
- ※2021年10月に「GCP (Google Cloud Platform)」から「Google Cloud」へ名称変更
  - 一部「GCP」と表現されていますが、「Google Cloud」と読み替えてください

## 対象者（想定）

- Google Cloud資格（ACE, PCAなど）を目指している方
- GCPをこれから始めたい初心者
- 多数のサービスに圧倒されているが、基礎から学びたい方

## コースの特徴

- **幅広く基礎をカバー**：20以上の主要サービスを広く浅く学習
- **図解による解説**：わかりやすく視覚的に説明
- **デモ付きの実践**：実際の画面を使ってサービスの利用方法をデモ
- **クラスノートの活用**：
  - 各レクチャーと連動
  - 図や用語の整理付き
  - 用語集（例：レイテンシー、可用性、コンテナ等）も用意

## 学習の進め方

- 講義を視聴しながらクラスノートを参照
- 可能であれば、自分で GCP 環境を構築して、デモと同様に手を動かす
- 用語が不明な場合は用語集で確認し、理解を深める

---

このコースは長時間にわたりますが、楽しみながら GCP の理解を深めていただければと思います。どうぞよろしくお願いいたします。

# 2. クラウドとは

この章では「クラウドとは何か？」という基本的な定義とそのメリットについて解説します。

## クラウドの定義（NISTによる）

米国国立標準技術研究所（NIST）が定義したクラウドの5つの特徴：

1. **オンデマンドセルフサービス**
   - サーバー、ストレージなどのリソースを迅速に利用可能
   - ブラウザ等で操作、オペレーター不要

2. **広範なネットワークアクセス**
   - 基本的にインターネット経由でアクセス
   - 地理的な制約がなく、世界中から利用可能
   - 例：日本からアメリカにVMを作成可能

3. **リソースの共用（マルチテナント）**
   - 物理的なインフラを複数ユーザーで共有
   - セキュリティと分離は確保されている
   - 専用リソース（デディケーテッド）も選択可能

4. **スピーディーな拡張性（スケーラビリティ）**
   - 自動／手動によるスケールアップ・ダウン／イン・アウトが可能
   - 仮想リソースだからこそ、柔軟に拡張縮小ができる

5. **計測可能なサービス（メータリング）**
   - 利用状況を細かく測定可能（例：100ミリ秒単位）
   - 課金・レポート・モニタリングに活用
   - 無料枠の管理や超過による課金も明確

---

## クラウドのメリット

### 1. スモールスタートが可能
- 無料枠から始めて、必要に応じてリソースを拡張
- 初期投資不要。個人でも導入可能

### 2. 余剰リソースの削減
- 不要になったリソースは削除可能
- オンプレのような遊休設備が発生しにくい

### 3. 先端技術への容易なアクセス
- AI、IoT、データサイエンスなどの先端技術を簡単に利用可能
- 専門知識がなくてもGUIなどで使える
- 例：GCPのAIサービスで簡単にモデル実装が可能

---

## 補足

- クラウドを学ぶ際は、常に「オンプレでやるとどうなるか？」を比較しながら理解を深めると効果的です。

# 3. GCPとは

## GCP（Google Cloud Platform）とは

- Google が提供するクラウドプラットフォーム
- クラウドの5つの定義（NIST）をすべて満たす
- 略称：**GCP**
- 提供開始：**2008年**
- 日本リージョン：
  - 東京：2016年開設
  - 大阪：2019年開設（1国に複数リージョンは稀）

## クラウド市場での位置づけ

- 1位：AWS（Amazon Web Services）
- 2位：Microsoft Azure
- 3位：Google Cloud（GCP） ← 成長率はトップクラス
- その他：Oracle, IBMなどもクラウド展開中

## GCPの特長

- **基本的なクラウドサービスは他社と共通**：
  - VMの作成（Linux / Windows）
  - ストレージの利用
  - リレーショナルDB、Webホスティング 等

- **GCPならではの強み**：
  - **BigQuery**：高速なビッグデータ分析サービス
  - **Spanner**：グローバルにスケーリング可能な分散RDB
  - **Bigtable**：エンタープライズ向けNoSQL DB
  - Google 自社サービス（Gmail, YouTube等）でも実運用されている技術をベースに提供

- **Kubernetesの生みの親**：
  - コンテナオーケストレーション技術「Kubernetes」はGoogleが開発
  - GCPでは **GKE (Google Kubernetes Engine)** として提供

## 主なサービスカテゴリ

### コンピュート系
- Compute Engine（VM）
- App Engine（PaaS）
- Cloud Run（コンテナ実行）
- Cloud Functions（FaaS）

### データベース・ストレージ系
- Cloud Storage（オブジェクトストレージ）
- BigQuery（DWH）
- Spanner / Bigtable / Datastore / Firestore
- Firebase（モバイル・Web向けBaaS）

### ネットワーク系
- Cloud Load Balancing（負荷分散）
- Cloud DNS（名前解決）
- VPC（仮想ネットワーク）

### 運用・モニタリング系
- Operations Suite（旧Stackdriver）

### その他
- AI / 機械学習系サービス（Vertex AI など）
- IoT、セキュリティ、ID管理など多数

## サービス全体の把握方法

- GCPには多数のプロダクトが存在（100以上）
- **チートシート（PDF）** が公式・非公式に提供されており、全体像を把握するのに有用
  - 例：GitHub や Twitter で公開されているサービス一覧図
  - 毎年アップデートされており、2021年版なども存在

---

> 🔍 **補足**：GCPを学習する際には、「Googleの技術基盤で構築された信頼性の高いクラウドであること」「他クラウドとの共通点と相違点を理解すること」が重要です。

# 4. GCPの始め方

この章では、Google Cloud Platform (GCP) を初めて利用する際の手順と注意点について解説します。

---

## ✅ はじめに

- GCPに登録すると**$300分の無料クレジット**が付与される
- 有効期間は**90日間**
- 無料トライアル終了後も「**Always Free枠**」で一部のサービスは無料で利用可能
- **本人の同意なしに課金されることはない**

---

## 🛠 利用開始に必要なもの

| 必要なもの         | 説明                                                                 |
|------------------|----------------------------------------------------------------------|
| Googleアカウント  | 作成無料。既存のものでもOK                                          |
| 携帯電話番号      | 本人確認用コード（SMS）受信用                                      |
| クレジットカード  | 本人確認と将来の有料利用のため（※トライアル中に自動課金なし）     |

---

## 🌐 利用開始手順

1. **GCPの登録ページへアクセス**
   - 公式URL：[https://cloud.google.com/](https://cloud.google.com/)

2. **Googleアカウントでログイン**
   - 新規作成 or 既存のアカウント使用

3. **利用規約に同意**

4. **アカウント有効化**
   - 右上の「**有効化**」ボタンをクリック
   - 「$300無料クレジット利用」の案内が表示される

5. **本人確認の3ステップ**

   - **ステップ1**：国やアカウントの種類を選択し、利用規約に再同意
   - **ステップ2**：携帯電話に送られる6桁コードをSMSで受信・入力
   - **ステップ3**：クレジットカード情報・住所の入力（個人/法人の区別も選択）

6. **完了後、GCPコンソールが利用可能に**
   - 最初のプロジェクト（例：`My First Project`）が作成される

---

## 💻 VM（仮想マシン）を作成してみる

1. 左上の「≡（ハンバーガーメニュー）」から **Compute Engine** を選択  
2. 最初のアクセス時、**API有効化**が必要 → 数十秒待機  
3. 「**インスタンスの作成**」をクリック  
4. 適当に名前を設定  
5. **マシンタイプ：最小（例：e2-micro）** を選択（コスト最小）
6. 「作成」をクリック  
7. 数十秒で仮想マシンが起動  

---

## 🖥 SSHで接続してみる

- 作成したインスタンスに「SSH」ボタンからWebターミナルで接続
- 例：`ls` コマンドなどでLinux操作を確認
- リージョン：例）`us-central1`（アメリカ）

---

## 🧹 VMの削除

- インスタンス詳細画面で「削除」ボタンを押すだけ
- 削除後は料金が発生しない

---

## 💡 注意点・補足

- 初回は手順が多く感じるが、一度慣れれば簡単
- UIの変更はあるが、**基本的な流れは変わらない**
- Always Free枠や無料クレジットを使って、積極的に試してみるのが重要

# 5. リージョンとゾーン

## 🗺 リージョンとは？

- **リージョン（Region）**：GCPのリソース（サーバーやストレージなど）が**物理的に配置されている地域**のこと。
- GCPには現在、**世界に28のリージョン**が存在（※今後も拡大予定）。
- 日本には以下の2リージョンがある：
  - 東京（asia-northeast1）
  - 大阪（asia-northeast2）

---

## 🏢 ゾーンとは？

- **ゾーン（Zone）**：1つのリージョンを構成する**サブユニット**。通常、1リージョンあたり**複数のゾーン（例：3つ）**で構成。
- ゾーン ≒ データセンター（ただし複数のデータセンターで1ゾーンを構成することも）
- **リージョン → ゾーン → データセンター → サーバー → 仮想マシン（VM）**のような構造

---

## 🌍 GCPネットワーク構成

- **グローバルネットワーク**：海底ケーブルなどで各リージョン・ゾーンが高速かつセキュアに接続
- **エッジ拠点（Edge Location）**：
  - 世界中に約146か所（ゾーンよりも多い）
  - GCPネットワークへの**入り口**として機能（ユーザー → Edge → GCP）

---

## 🧩 リージョン・ゾーンの選択が影響すること

| 項目 | 説明 |
|------|------|
| **データ主権** | データを日本に保管する必要がある場合、日本リージョンを選ぶ必要がある |
| **コスト** | 日本リージョンは他地域に比べてやや高め。米国などは比較的安価 |
| **レイテンシー** | 利用者の地理的距離によって応答速度が変わる（例：日本から米国リージョンは少し遅い） |
| **可用性** | 災害や障害時のリスク回避のため、別ゾーンや別リージョンへの冗長構成が推奨される |

---

## 💥 障害と可用性設計

- **ゾーン単位の障害**：ゾーン内のリソースが停止する可能性あり
- **リージョン全体の障害**：大規模災害等でその地域全体のサービスが停止することも
- **可用性向上の方法**：
  - 複数ゾーンに分散配置（ゾーン間冗長）
  - 複数リージョンに分散配置（リージョン間冗長）

> 例：東京リージョンのゾーンAにWebサーバーのみ配置 → ゾーンA障害でダウン  
> ⇒ 東京リージョン内の別ゾーンや、別リージョン（例：米国）にもサーバー配置で可用性UP

---

## ✅ まとめ

- **リージョン** = リソースの配置される「地域」
- **ゾーン** = リージョンを構成する「区画」（データセンター単位）
- サービスの**コスト・速度・可用性・データ所在地**に影響するため、設計段階での考慮が重要

# 6. プロジェクトとリソース階層（GCP）

## 概要

Google Cloud Platform（GCP）のリソースは、以下の4段階の階層構造で整理・管理されています。

1. **組織（Organization）**
2. **フォルダ（Folder）**
3. **プロジェクト（Project）**
4. **リソース（Resource）**

この階層構造により、リソースの効率的な整理・管理が可能です。

---

## リソース階層の構造

GCPのリソース階層は、以下のように構成されます。

## 7. 管理コンソール

### 概要

管理コンソールは、GCPのリソース管理・アクセス制御・課金管理などを一元的に行うためのブラウザベースのGUIです。多くの操作がこのコンソールから実施でき、GCP利用時には欠かせないインターフェースです。

![GCP管理コンソール画面（青いUI）]

---

### 主な機能

- **ダッシュボード**
  - リソースの使用状況をパネル形式で表示
  - カスタマイズ可能
  - プロジェクトの切り替えや新規作成も可能

- **リソースの作成**
  - VM、App Engine、Cloud Storage、データベースなどをGUIで作成可能
  - コマンドライン（gcloud CLI）やSDKでも作成可能

- **モニタリング**
  - 各リソースの使用状況を確認可能
  - ダッシュボードから視覚的に状況を把握できる

- **アクセス権限管理（IAM）**
  - ユーザーの追加
  - 各ユーザーの権限設定と管理が可能

- **課金管理**
  - プロジェクト単位での課金状況確認
  - レポート、予算、アラートなどの設定が可能

- **Cloud Shell**
  - ブラウザ上で仮想マシンとコマンドライン環境を無料で提供
  - Linuxコマンドでリソース管理可能

---

### ポイント

- 管理コンソールの利用は無料
- GCPトライアル（300ドル／90日）終了後も管理コンソールは継続利用可能
- 慣れるまでは操作に時間がかかるかもしれませんが、使い続けるうちに直感的に操作可能になります

---

### 初期画面の構成（例）

- プロジェクト名：`MYFIRSTプロジェクト`
- リソース選択：Compute、Storage、DBなど
- アクティビティ／推奨事項タブあり

## 8. Cloud Shell

### 概要

Cloud Shellは、ブラウザ上で動作するクラウドベースのターミナルです。GCPのリソース管理や開発をコマンドラインから行うための便利なツールです。

- コマンドベースでの開発・運用管理が可能
- GCP専用コマンドや一般的な開発ツールがプリインストール済み
- 無料で利用できる一時的なVM（仮想マシン）を提供

---

### 主な特徴

- **プリインストール済みのツール**
    - `gcloud`：GCPリソース操作
    - `gsutil`：Cloud Storage管理
    - `bq`：BigQuery操作
    - `git`, `docker`, `kubectl`：一般的な開発・運用ツール
    - 各種言語ランタイム（Java, Python, Ruby など）

- **VMとして動作**
    - 実体はGoogleが提供する仮想マシン
    - ブラウザからアクセス可能
    - 非アクティブ状態が20分続くとセッション切断
    - セッション再開は「再接続」ボタンで可能

---

### 便利な機能

- 💻 **ウェブプレビュー**  
  簡易Webサーバーを起動し、アプリケーションのプレビューが可能

- ✏️ **エディター**  
  ターミナル横に統合されたエディターでファイルの作成・編集・保存が可能  
  `ls` や `rm` などのLinux基本コマンドも利用可能

- 📂 **ファイル操作**  
  ファイルのアップロード・ダウンロード  
  フォルダー単位のダウンロード（ZIP圧縮）

---

### 補足

- Cloud Consoleモバイルアプリ（Android/iOS）からもCloud Shellの利用が可能
- ブラウザベースなので、出先からでも開発・管理が可能
- 年々機能が強化されており、今後の拡張も期待できる

---

### まとめ

Cloud Shellは、GCPの運用・開発を行う上で非常に便利なWebベースの開発・運用環境です。VM上で動作し、各種ツールが統合されているため、簡単にリソース管理やアプリ開発ができます。

## 9. Always Free（無料枠）について

Google Cloud Platform（GCP）には、**Always Free（無料枠）**と呼ばれる、特定のプロダクトが毎月一定量まで無料で使える仕組みがあります。

### 🎁 無料トライアルとの違い

| 項目         | Always Free（無料枠）                | 無料トライアル           |
| ------------ | ------------------------------------ | ------------------------ |
| 内容         | 対象プロダクトを毎月一定量まで無料   | 300ドル分のクレジット    |
| 有効期限     | なし                                 | 90日間（以前は180日）    |
| 課金の有無   | 上限を超えると自動で課金             | アップグレードしない限り課金なし |

### ✅ Always Freeの対象プロダクトと上限の例（一部）

| プロダクト名             | 無料利用枠の内容                                   |
| ------------------------ | -------------------------------------------------- |
| App Engine               | 28インスタンス時間/日（F1インスタンス）            |
| Cloud Functions          | 月200万回の呼び出し                                |
| Cloud Run                | 月200万リクエスト、360,000GiB秒                    |
| Cloud Storage            | 月5GBの標準ストレージ（北米リージョン）            |
| Compute Engine           | 米国リージョンでe2-microインスタンス1台分/月       |
| BigQuery                 | 月10GBストレージ、月1TBのクエリ処理                |
| Cloud Pub/Sub            | 月10GBのメッセージ転送量                           |
| Firestore（Datastore）   | 1GBストレージ、5万ドキュメント読み取り、2万書き込み |
| Cloud Shell              | 月50時間のセッション、5GBのストレージ              |

> ※ 詳細は公式ページに掲載された表を参照してください。

### ⚠️ 注意点

- 無料枠には上限があります。超過すると自動で課金されます。
- クレジットカード登録後に無料枠を使いすぎると、料金が発生します。
- 予算とアラートを設定することで、予期せぬ課金を防げます。

### 💡 活用例

- 学習目的での利用
- 試験的なプロダクトの立ち上げ
- 個人開発やプロトタイピングでの活用

### 🔗 公式情報

- [Google Cloud の Always Free 対象プロダクト（公式）](https://cloud.google.com/free)

---

## 10. 料金計算ツール

GCPには、リソースの使用料金を事前に見積もるための**料金計算ツール**が用意されています。

### 料金計算ツールの概要

- WEB上のツールで、様々なGCPコンポーネントを選択し、必要なパラメータを入力することで概算コストを計算できます。
- クラウド構成のコスト比較や、最小構成・高可用性構成など複数パターンの見積もりに便利です。
- 競合クラウド（AWSやAzure）との料金比較にも活用可能。
- 料金計算ツールは英語UIですが、直感的に操作可能です。

### 使い方と特徴

- **コンポーネント例**：Cloud DNS、ロードバランサー、Compute Engine（VM）、Cloud Storage、Cloud SQLなど
- 各リソースの詳細パラメータを指定可能（例：インスタンス数、CPU・メモリスペック、リージョン、リクエスト数、ストレージ容量など）
- リージョンによって料金単価が変わるため、地域選択も重要
- 入力したパラメータに応じて料金が変動し、合計金額がリアルタイムで表示される
- パラメータを編集してコスト変化を確認可能（例：VM台数を2台から3台に増やすと料金が増加）
- 新しいサービスを追加して見積もりに含めることもできる（例：Cloud Runのリクエスト数やCPU/メモリなど）

### 参考例

| 項目             | 内容                           | 概算料金（例）           |
| ---------------- | ------------------------------ | ------------------------ |
| Cloud DNS        | 1ゾーン、クエリ100万回         | 数ドル程度               |
| ロードバランサー | ネットワーク使用料             | 料金に影響               |
| Compute Engine   | VM 2台、スペック指定           | 数十ドル〜百ドル単位     |
| Cloud Storage    | ストレージ容量指定             | 数ドル〜                 |
| Cloud SQL        | MySQLインスタンス、ストレージ指定 | 数十ドル〜               |
| Cloud Run        | リクエスト数、CPUメモリ指定    | 無料枠以内なら無料、超過で課金 |

### メリット

- コストを事前に見える化できる
- 設計段階での費用検討に役立つ
- 複数構成を比較して最適な設計を選べる
- コスト削減のシミュレーションが可能

### URL・検索キーワード

- 「Google Cloud Platform Pricing Calculator」
- [GCP 料金計算ツール公式ページ](https://cloud.google.com/products/calculator)


# 11. アーキテクチャ図用のアイコン

GCPの設計時に使える**公式アーキテクチャ図用アイコンセット**の紹介です。

---

## 概要

- Google Cloud Platformのアーキテクチャ図を作成する際に利用できる公式アイコンセットが用意されている。
- アイコンは様々な形式で提供されている：
  - SVG形式、PNG形式
  - Googleスライド用テンプレート（閲覧・コピー可能）
- GCPの多様なリソースやサービスを視覚的に表現できるアイコンが含まれている。

---

## 利用方法

- 「GCP アイコン」などのキーワードで検索すると公式ページにアクセス可能。
- ダウンロードしてローカルで利用することも、Googleスライドで直接コピー＆ペーストも可能。
- アイコンセットにはAIプラットフォームやApp Engine、Cloud Functionsなどのアイコンが含まれている。

---

## その他

- ソリューションテンプレートやカード形式での構成例も提供されている。
- 一般的な構成例の参考にもなるため、GCPソリューション設計時に活用すると便利。

---

公式アイコンを活用して、わかりやすいアーキテクチャ図を作成しましょう。
